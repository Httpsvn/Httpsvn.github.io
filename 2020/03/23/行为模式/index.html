<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>行为模式 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务,解决问题运行时复杂的流程控制，这就是设计模式。观察者模式我们听广播的时候，广播并不知道谁在收听，也不知道是否有人收听，而且广播是唯一的，但收听者却不是只有一个。  多个对象间存在一对多关系，当一个对象发生改变时，把这种改变通知给其他多个对象，从而影响其他对象的行为。  定义广播的抽象： 12345678910111213141516">
<meta property="og:type" content="article">
<meta property="og:title" content="行为模式">
<meta property="og:url" content="http://yoursite.com/2020/03/23/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务,解决问题运行时复杂的流程控制，这就是设计模式。观察者模式我们听广播的时候，广播并不知道谁在收听，也不知道是否有人收听，而且广播是唯一的，但收听者却不是只有一个。  多个对象间存在一对多关系，当一个对象发生改变时，把这种改变通知给其他多个对象，从而影响其他对象的行为。  定义广播的抽象： 12345678910111213141516">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-23T10:16:05.000Z">
<meta property="article:modified_time" content="2020-03-24T09:17:39.173Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="设计模式">
<meta property="article:tag" content="行为模式">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-行为模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/23/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time datetime="2020-03-23T10:16:05.000Z" itemprop="datePublished">2020-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      行为模式
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务-解决问题运行时复杂的流程控制，这就是设计模式。"><a href="#多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务-解决问题运行时复杂的流程控制，这就是设计模式。" class="headerlink" title="多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务,解决问题运行时复杂的流程控制，这就是设计模式。"></a>多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务,解决问题运行时复杂的流程控制，这就是设计模式。</h2><h2 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h2><p>我们听广播的时候，广播并不知道谁在收听，也不知道是否有人收听，而且广播是唯一的，但收听者却不是只有一个。</p>
<blockquote>
<p>多个对象间存在一对多关系，当一个对象发生改变时，把这种改变通知给其他多个对象，从而影响其他对象的行为。</p>
</blockquote>
<p>定义广播的抽象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Broadcast &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    List&lt;Receiver&gt; receiverList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public void add(Receiver receiver) &#123;</span><br><span class="line">        receiverList.add(receiver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void detach(Receiver receiver) &#123;</span><br><span class="line">        receiverList.remove(receiver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Notify() &#123;</span><br><span class="line">        for (Receiver receiver : receiverList) &#123;</span><br><span class="line">            receiver.Update(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义接收者的抽象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public  abstract class Receiver &#123;</span><br><span class="line"></span><br><span class="line">    public String name;</span><br><span class="line">    public abstract void  Update(String name);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体化广播</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class FM99 extends Broadcast &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class FM106 extends  Broadcast &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体化接收者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Yang extends Receiver &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void Update(String broadcastNam) &#123;</span><br><span class="line">        System.out.println(name+&quot;接收到来自&quot;+broadcastNam+&quot;的广播&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Zhang extends  Receiver &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void Update(String broadcastNam) &#123;</span><br><span class="line">        System.out.println(name+&quot;接收到来自&quot;+broadcastNam+&quot;的广播&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>客户端调用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import java.awt.*;</span><br><span class="line"></span><br><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        Broadcast fm106&#x3D;new FM106();</span><br><span class="line">        fm106.name&#x3D;&quot;fm106&quot;;</span><br><span class="line">        Broadcast fm99&#x3D;new FM99();</span><br><span class="line">        fm99.name&#x3D;&quot;fm99&quot;;</span><br><span class="line">        Receiver yang &#x3D;new Yang();</span><br><span class="line">        yang.name&#x3D;&quot;杨&quot;;</span><br><span class="line">        Receiver zhang &#x3D;new Zhang();</span><br><span class="line">        zhang.name&#x3D;&quot;张&quot;;</span><br><span class="line"></span><br><span class="line">        fm106.add(yang);</span><br><span class="line">        fm106.Notify();</span><br><span class="line">        fm106.add(zhang);</span><br><span class="line">        fm106.Notify();</span><br><span class="line"></span><br><span class="line">        fm99.add(yang);</span><br><span class="line">        fm99.Notify();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">杨接收到来自fm106的广播</span><br><span class="line">杨接收到来自fm106的广播</span><br><span class="line">张接收到来自fm106的广播</span><br><span class="line">杨接收到来自fm99的广播</span><br></pre></td></tr></table></figure>

<p>以上便是完成了一对多的观察，当有其他订阅者的时候，并修改现有的类，而是进行扩展新类。但是因为在抽象层已经确定了订阅关系，如果订阅变化，其子类也会被修改。  </p>
<p>补充：<br>我的手机想接收广播怎么办？通过委托/回调/反射(反正就是第三方转发一次)实现。</p>
<p>修改抽象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;定义一个回调</span><br><span class="line">public interface EventHandler &#123;</span><br><span class="line">    void  handler();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public abstract class Broadcast &#123;</span><br><span class="line">    &#x2F;&#x2F;添回调接口</span><br><span class="line">    EventHandler eventHandler;</span><br><span class="line"></span><br><span class="line">    public String name;</span><br><span class="line">    List&lt;Receiver&gt; receiverList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public void add(Receiver receiver) &#123;</span><br><span class="line">        receiverList.add(receiver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void detach(Receiver receiver) &#123;</span><br><span class="line">        receiverList.remove(receiver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Notify() &#123;</span><br><span class="line">        for (Receiver receiver : receiverList) &#123;</span><br><span class="line">            receiver.Update(name);</span><br><span class="line">        &#125;</span><br><span class="line">        if (eventHandler!&#x3D;null)&#123;</span><br><span class="line">            eventHandler.handler();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>客户端调用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import java.awt.*;</span><br><span class="line"></span><br><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        Broadcast fm106&#x3D;new FM106();</span><br><span class="line">        fm106.name&#x3D;&quot;fm106&quot;;</span><br><span class="line">        Broadcast fm99&#x3D;new FM99();</span><br><span class="line">        fm99.name&#x3D;&quot;fm99&quot;;</span><br><span class="line">        Receiver yang &#x3D;new Yang();</span><br><span class="line">        yang.name&#x3D;&quot;杨&quot;;</span><br><span class="line">        Receiver zhang &#x3D;new Zhang();</span><br><span class="line">        zhang.name&#x3D;&quot;张&quot;;</span><br><span class="line"></span><br><span class="line">        fm106.eventHandler&#x3D; () -&gt; yang.Update(&quot;fm106&quot;);</span><br><span class="line"></span><br><span class="line">        fm106.Notify();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">杨接收到来自fm106的广播</span><br></pre></td></tr></table></figure>

<h2 id="模板方法"><a href="#模板方法" class="headerlink" title="模板方法"></a>模板方法</h2><p>提前公共方法到父类，有子类来实现非公共方法。提供了一个很好的平台服用机制。  </p>
<p>这一块是在没有什么好说的，说一下缺点：</p>
<blockquote>
<p>父类中的抽象方法由子类实现，子类执行的结果会影响父类的结果，这导致一种反向的控制结构</p>
</blockquote>
<p>子类在调用公共方法的时候，会违背一开始的父类的设计原则，最坏的情况，是虽然是还是相同的公共方法，但是因为顺序影响，不得的重写这些方法，个人的建议是将这些模板方式，写入其他第三类进行引用，类似于方法储存。</p>
<h2 id="命令方法"><a href="#命令方法" class="headerlink" title="命令方法"></a>命令方法</h2><p><code>方法的请求者</code>与<code>方法的实现者</code>之间实现一个类，这个类负责对请求/命令的转发、重做、记录、撤销。  </p>
<p>方法的实现者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Chef &#123;</span><br><span class="line"></span><br><span class="line">    public void  fish()&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;糖醋鲤鱼&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void  bone()&#123;</span><br><span class="line">        System.out.println(&quot;红烧排骨&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>集成命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public  abstract  class Command &#123;</span><br><span class="line"></span><br><span class="line">    public Chef chef;</span><br><span class="line"></span><br><span class="line">    public Command(Chef chef) &#123;</span><br><span class="line">        this.chef &#x3D; chef;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract  void  ExcuteCommand();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class BoneCommand extends Command &#123;</span><br><span class="line">    public BoneCommand(Chef chef) &#123;</span><br><span class="line">        super(chef);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void ExcuteCommand() &#123;</span><br><span class="line">        chef.bone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class FishCommand extends Command &#123;</span><br><span class="line">    public FishCommand(Chef chef) &#123;</span><br><span class="line">        super(chef);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void ExcuteCommand() &#123;</span><br><span class="line">        chef.fish();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>命令的转发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class Waiter &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;记录</span><br><span class="line">    private List&lt;Command&gt; commandList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;添加</span><br><span class="line">    public void setOrder(Command command) &#123;</span><br><span class="line"></span><br><span class="line">        if (command instanceof BoneCommand) &#123;</span><br><span class="line"></span><br><span class="line">            System.out.println(&quot;红烧排骨卖完了&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line"></span><br><span class="line">            commandList.add(command);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;删除</span><br><span class="line">    public void removeOrder(Command command) &#123;</span><br><span class="line">        if (commandList.contains(command)) &#123;</span><br><span class="line">            commandList.remove(command);</span><br><span class="line">            System.out.println(&quot;别做了&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void  Notify()&#123;</span><br><span class="line">        for (Command command : commandList) &#123;</span><br><span class="line">            command.ExcuteCommand();</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;大厨,开始做吧&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>命令的请求者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Waiter waiter &#x3D; new Waiter();</span><br><span class="line">        Chef chef &#x3D; new Chef();</span><br><span class="line"></span><br><span class="line">         &#x2F;&#x2F;方法的请求者转发给命令调用方</span><br><span class="line">        Command fishCommand &#x3D; new FishCommand(chef);</span><br><span class="line">        Command boneCommand &#x3D; new BoneCommand(chef);</span><br><span class="line">        waiter.setOrder(fishCommand);</span><br><span class="line">        waiter.setOrder(boneCommand);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;点完了</span><br><span class="line">        waiter.Notify();</span><br><span class="line">        &#x2F;&#x2F;不想吃了</span><br><span class="line">        waiter.removeOrder(fishCommand);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>命令模式的好处在于，所有增加或删除命令非常方便。但是容易造成命令爆炸。</p>
<h2 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h2><p>写if-else 写的想🤮吗？</p>
<p>我们写的if-else实际上是对对象中的某个状态进行判断，但当对象的状态很多时，程序会变得很复杂。而且增加新的状态要添加新的 if-else 语句，这违背了“开闭原则”，不利于程序的扩展。  </p>
<blockquote>
<p>对有状态的对象，把复杂的“判断逻辑”提取到不同的状态对象中，允许状态对象在其内部状态发生改变时改变其行为。</p>
</blockquote>
<p>定义抽象状态:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public  abstract class State &#123;</span><br><span class="line"></span><br><span class="line">    public  abstract  void  ReadCpuState(Cpu cpu);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定于具体的状态类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 流程</span><br><span class="line">public class Fluent extends State &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void ReadCpuState(Cpu cpu) &#123;</span><br><span class="line">        if (cpu.getTemperature()&lt;&#x3D;30)&#123;</span><br><span class="line">            System.out.println(&quot;运行流程&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            cpu.setState(new Caton());</span><br><span class="line">            cpu.readState();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;卡顿</span><br><span class="line">public class Caton extends State &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void ReadCpuState(Cpu cpu) &#123;</span><br><span class="line">        if (cpu.getTemperature()&lt;&#x3D;70)&#123;</span><br><span class="line">            System.out.println(&quot;运行卡顿&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            cpu.setState(new Collapse());</span><br><span class="line">            cpu.readState();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;崩溃</span><br><span class="line">public class Collapse extends State &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void ReadCpuState(Cpu cpu) &#123;</span><br><span class="line">        if (cpu.getTemperature() &lt;&#x3D; 90) &#123;</span><br><span class="line">            System.out.println(&quot;运行崩溃&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;电脑死机&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>环境类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class Cpu &#123;</span><br><span class="line">    public Cpu() &#123;</span><br><span class="line">        state&#x3D;new Fluent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private State state;</span><br><span class="line">    private int temperature;</span><br><span class="line"></span><br><span class="line">    public State getState() &#123;</span><br><span class="line">        return state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setState(State state) &#123;</span><br><span class="line">        this.state &#x3D; state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getTemperature() &#123;</span><br><span class="line">        return temperature;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setTemperature(int temperature) &#123;</span><br><span class="line">        this.temperature &#x3D; temperature;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void readState() &#123;</span><br><span class="line"></span><br><span class="line">        state.ReadCpuState(this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>客户端请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Cpu cpu &#x3D; new Cpu();</span><br><span class="line">        cpu.setTemperature(10);</span><br><span class="line">        cpu.readState();</span><br><span class="line">        cpu.setTemperature(60);</span><br><span class="line">        cpu.readState();</span><br><span class="line">        cpu.setTemperature(90);</span><br><span class="line">        cpu.readState();</span><br><span class="line">        cpu.setTemperature(100);</span><br><span class="line">        cpu.readState();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line">运行流程</span><br><span class="line">运行卡顿</span><br><span class="line">运行崩溃</span><br><span class="line">电脑死机</span><br></pre></td></tr></table></figure>

<p>状态模式把受环境改变的对象行为包装在不同的状态对象里，其意图是让一个对象在其内部状态改变的时候，其行为也随之改变</p>
<h2 id="职责链模式"><a href="#职责链模式" class="headerlink" title="职责链模式"></a>职责链模式</h2><blockquote>
<p>为了避免请求发送者与多个请求处理者耦合在一起，将所有请求的处理者通过前一对象记住其下一个对象的引用而连成一条链；当有请求发生时，可将请求沿着这条链传递，直到有对象处理它为止。</p>
</blockquote>
<p>公司请假的时候，一般都是要每一层进行审批的，每一层可以审批的权限也是不同的，必然组长可以审批2天的，主管可以审批5天的，一个星期的要经理审批。我们不会拿着请假条一个一个去问，现实中都是权限不够直接交给<br>上一层进行审批。  </p>
<p>抽象处理者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Leader &#123;</span><br><span class="line">    public Leader UpperLeader;</span><br><span class="line"></span><br><span class="line">    public void setUpperLeader(Leader upperLeader) &#123;</span><br><span class="line">        UpperLeader &#x3D; upperLeader;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract void HandleRequest(int day);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体化处理者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F;小组长</span><br><span class="line">public class GroupLeader extends Leader &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void HandleRequest(int day) &#123;</span><br><span class="line">        if (day &lt;&#x3D; 2) &#123;</span><br><span class="line">            System.out.println(&quot;小组长批准请假&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            UpperLeader.HandleRequest(day);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;主管</span><br><span class="line">public class Supervisor extends Leader &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void HandleRequest(int day) &#123;</span><br><span class="line">        if (day &lt;&#x3D; 5) &#123;</span><br><span class="line">            System.out.println(&quot;主管批准请假&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            UpperLeader.HandleRequest(day);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;总经理</span><br><span class="line">public class Manager extends  Leader &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void HandleRequest(int day) &#123;</span><br><span class="line">        if (day&lt;&#x3D;7)&#123;</span><br><span class="line">            System.out.println(&quot;总经理批准请假&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            System.out.println(&quot;请的时间太长了&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开始请假</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import java.awt.*;</span><br><span class="line"></span><br><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        GroupLeader groupLeader &#x3D;new GroupLeader();</span><br><span class="line">        Supervisor supervisor &#x3D;new Supervisor();</span><br><span class="line">        &#x2F;&#x2F;设置链的层级关系</span><br><span class="line">        Manager manager &#x3D;new Manager();</span><br><span class="line">        groupLeader.setUpperLeader(supervisor);</span><br><span class="line">        supervisor.setUpperLeader(manager);</span><br><span class="line"></span><br><span class="line">        groupLeader.HandleRequest(2);</span><br><span class="line">        groupLeader.HandleRequest(5);</span><br><span class="line">        groupLeader.HandleRequest(7);</span><br><span class="line">        groupLeader.HandleRequest(10);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">结果：</span><br><span class="line">小组长批准请假</span><br><span class="line">主管批准请假</span><br><span class="line">总经理批准请假</span><br><span class="line">请的时间太长了</span><br></pre></td></tr></table></figure>

<p>职责链和状态模式的处理方式基本相同，但是注意一点：</p>
<p>职责链：模式的层级方式是在客户端确定的，这点比状态模式（状态模式是在环境类与各个状态类中共同确定了层级）更加灵活，也正是这点灵活，使得确定关系的时候一定要小心，<br>比如<code>supervisor.setUpperLeader(supervisor);</code>这就不断循环了。</p>
<h2 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h2><p>我们希望一个类在修改的时候，对其他的类应当尽量的小。  </p>
<p>好多对象之间存在复杂的交互关系，这种交互关系常常是“网状结构”，如果把这种“网状结构”改为“星形结构”的话，将大大降低它们之间的“耦合性”。</p>
<blockquote>
<p>定义一个中介对象来封装一系列对象之间的交互，使原有对象之间的耦合松散，且可以独立地改变它们之间的交互。中介者模式又叫调停模式，它是迪米特法则的典型应用。</p>
</blockquote>
<p>定义中介者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class Mediator &#123;</span><br><span class="line">    private Customer buyer;</span><br><span class="line">    private Customer seller;</span><br><span class="line"></span><br><span class="line">    public Customer getBuyer() &#123;</span><br><span class="line">        return buyer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBuyer(Customer buyer) &#123;</span><br><span class="line">        this.buyer &#x3D; buyer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Customer getSeller() &#123;</span><br><span class="line">        return seller;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSeller(Customer seller) &#123;</span><br><span class="line">        this.seller &#x3D; seller;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void relay(String message, Customer customer) &#123;</span><br><span class="line"></span><br><span class="line">        if (customer instanceof Buyer) &#123;</span><br><span class="line">            seller.receive(&quot;买家说&quot;, message);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            buyer.receive(&quot;卖家说&quot;, message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义抽象客户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public  abstract  class Customer &#123;</span><br><span class="line"></span><br><span class="line">    Mediator mediator;</span><br><span class="line"></span><br><span class="line">    public Customer(Mediator mediator) &#123;</span><br><span class="line">        this.mediator &#x3D; mediator;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void send(String message)&#123;</span><br><span class="line">        mediator.relay(message,this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract void receive(String from,String ad);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义买家/卖家</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Buyer extends Customer &#123;</span><br><span class="line">    public Buyer(Mediator mediator) &#123;</span><br><span class="line">        super(mediator);</span><br><span class="line">        mediator.setBuyer(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void receive(String from, String ad) &#123;</span><br><span class="line">        System.out.println(&quot;买家接收的信息:&quot;+from+ad);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Seller extends  Customer &#123;</span><br><span class="line">    public Seller(Mediator mediator) &#123;</span><br><span class="line">        super(mediator);</span><br><span class="line">        mediator.setSeller(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void receive(String from, String ad) &#123;</span><br><span class="line">        System.out.println(&quot;卖家接收的信息:&quot;+from+ad);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开始买卖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import java.awt.*;</span><br><span class="line"></span><br><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        Mediator mediator &#x3D; new Mediator();</span><br><span class="line">        Buyer buyer &#x3D; new Buyer(mediator);</span><br><span class="line">        Seller seller &#x3D; new Seller(mediator);</span><br><span class="line">        buyer.send(&quot;多少钱&quot;);</span><br><span class="line">        seller.send(&quot;120万&quot;);</span><br><span class="line">        buyer.send(&quot;少点&quot;);</span><br><span class="line">        seller.send(&quot;119万&quot;);</span><br><span class="line">        buyer.send(&quot;成交&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line"></span><br><span class="line">卖家接收的信息:买家说多少钱</span><br><span class="line">买家接收的信息:卖家说120万</span><br><span class="line">卖家接收的信息:买家说少点</span><br><span class="line">买家接收的信息:卖家说119万</span><br><span class="line">卖家接收的信息:买家说成交</span><br></pre></td></tr></table></figure>

<p>这样使得两真正的交互，并没有联系，但让两真正的对象与中介者联系了，所以，如果存在多对多交互的时候，慎用<code>中介者模式</code></p>
<h2 id="访问模式"><a href="#访问模式" class="headerlink" title="访问模式"></a>访问模式</h2><p>任何一个整体都可以分解成个体，所有的个体可以组合成不同的主体。</p>
<blockquote>
<p>将作用于某种数据结构中的各元素的操作分离出来封装成独立的类，使其在不改变数据结构的前提下可以添加作用于这些元素的新的操作，为数据结构中的每个元素提供多种访问方式。它将对数据的操作与数据结构进行分离，是行为类模式中最复杂的一种模式。</p>
</blockquote>
<p>武器的抽象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public abstract class Arms &#123;</span><br><span class="line"></span><br><span class="line">    public abstract  void  enchanting(Runes runes);</span><br><span class="line"></span><br><span class="line">    public abstract  void upgrade(Steel steel);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>材料的抽象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Material &#123;</span><br><span class="line">    public String Attributes;</span><br><span class="line">    public  abstract void  forging(Arms arms);</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return Attributes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体化武器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Knife extends Arms &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void enchanting(Runes runes) &#123;</span><br><span class="line">        System.out.println(&quot;给刀符加&quot;+runes.toString()+&quot;属性&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void upgrade(Steel steel) &#123;</span><br><span class="line">        System.out.println(&quot;给刀符添加&quot;+steel.toString()+&quot;,升级成功&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Sword extends Arms &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void enchanting(Runes runes) &#123;</span><br><span class="line">        System.out.println(&quot;给剑符加&quot;+runes.toString()+&quot;属性&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void upgrade(Steel steel) &#123;</span><br><span class="line">        System.out.println(&quot;给剑符添加&quot;+steel.toString()+&quot;,升级成功&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>具体化材料</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class Steel extends Material &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void forging(Arms arms) &#123;</span><br><span class="line">        arms.upgrade(this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Runes extends Material &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void forging(Arms arms) &#123;</span><br><span class="line">        arms.enchanting(this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>锻造</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import java.awt.*;</span><br><span class="line"></span><br><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Knife knife &#x3D; new Knife();</span><br><span class="line">        Sword sword &#x3D; new Sword();</span><br><span class="line">        Runes runes &#x3D; new Runes();</span><br><span class="line">        Steel steel &#x3D; new Steel();</span><br><span class="line"></span><br><span class="line">        runes.Attributes&#x3D;&quot;火&quot;;</span><br><span class="line">        steel.Attributes&#x3D;&quot;断碎&quot;;</span><br><span class="line"></span><br><span class="line">        runes.forging(knife);</span><br><span class="line">        runes.forging(sword);</span><br><span class="line"></span><br><span class="line">        steel.forging(knife);</span><br><span class="line">        steel.forging(sword);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line">给刀符加火属性</span><br><span class="line">给剑符加火属性</span><br><span class="line">给刀符添加断碎,升级成功</span><br><span class="line">给剑符添加断碎,升级成功</span><br></pre></td></tr></table></figure>

<p>访问者模式，是一个多对多访问模式，但是访问方向在抽象的时候就已经确定好了。如果我们添加一个锤子，只需要实现一个子类就可以了，但是如果要添加一个材料要修改的就多了。  </p>
<p>所以访问可以随意添加，被访问者添加就很麻烦了。</p>
<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><p>这个模式和状态模式很相似，当时策略模式的目的是：访问每个算法，使它们可以相互替换，且算法的变化不会影响使用算法的客户。而状态模式是判断后执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package strategy;</span><br><span class="line">public class StrategyPattern</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        Context c&#x3D;new Context();</span><br><span class="line">        Strategy s&#x3D;new ConcreteStrategyA();</span><br><span class="line">        c.setStrategy(s);</span><br><span class="line">        c.strategyMethod();</span><br><span class="line">        System.out.println(&quot;-----------------&quot;);</span><br><span class="line">        s&#x3D;new ConcreteStrategyB();</span><br><span class="line">        c.setStrategy(s);</span><br><span class="line">        c.strategyMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;抽象策略类</span><br><span class="line">interface Strategy</span><br><span class="line">&#123;   </span><br><span class="line">    public void strategyMethod();    &#x2F;&#x2F;策略方法</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;具体策略类A</span><br><span class="line">class ConcreteStrategyA implements Strategy</span><br><span class="line">&#123;</span><br><span class="line">    public void strategyMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(&quot;具体策略A的策略方法被访问！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;具体策略类B</span><br><span class="line">class ConcreteStrategyB implements Strategy</span><br><span class="line">&#123;</span><br><span class="line">  public void strategyMethod()</span><br><span class="line">  &#123;</span><br><span class="line">      System.out.println(&quot;具体策略B的策略方法被访问！&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;环境类</span><br><span class="line">class Context</span><br><span class="line">&#123;</span><br><span class="line">    private Strategy strategy;</span><br><span class="line">    public Strategy getStrategy()</span><br><span class="line">    &#123;</span><br><span class="line">        return strategy;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setStrategy(Strategy strategy)</span><br><span class="line">    &#123;</span><br><span class="line">        this.strategy&#x3D;strategy;</span><br><span class="line">    &#125;</span><br><span class="line">    public void strategyMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        strategy.strategyMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h2><p>将要备份的属性，备份到可以存储的类中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">package memento;</span><br><span class="line">public class MementoPattern</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        Originator or&#x3D;new Originator();</span><br><span class="line">        Caretaker cr&#x3D;new Caretaker();       </span><br><span class="line">        or.setState(&quot;S0&quot;); </span><br><span class="line">        System.out.println(&quot;初始状态:&quot;+or.getState());           </span><br><span class="line">        cr.setMemento(or.createMemento()); &#x2F;&#x2F;保存状态      </span><br><span class="line">        or.setState(&quot;S1&quot;); </span><br><span class="line">        System.out.println(&quot;新的状态:&quot;+or.getState());        </span><br><span class="line">        or.restoreMemento(cr.getMemento()); &#x2F;&#x2F;恢复状态</span><br><span class="line">        System.out.println(&quot;恢复状态:&quot;+or.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;备忘录</span><br><span class="line">class Memento</span><br><span class="line">&#123; </span><br><span class="line">    private String state; </span><br><span class="line">    public Memento(String state)</span><br><span class="line">    &#123; </span><br><span class="line">        this.state&#x3D;state; </span><br><span class="line">    &#125;     </span><br><span class="line">    public void setState(String state)</span><br><span class="line">    &#123; </span><br><span class="line">        this.state&#x3D;state; </span><br><span class="line">    &#125;</span><br><span class="line">    public String getState()</span><br><span class="line">    &#123; </span><br><span class="line">        return state; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;发起人</span><br><span class="line">class Originator</span><br><span class="line">&#123; </span><br><span class="line">    private String state;     </span><br><span class="line">    public void setState(String state)</span><br><span class="line">    &#123; </span><br><span class="line">        this.state&#x3D;state; </span><br><span class="line">    &#125;</span><br><span class="line">    public String getState()</span><br><span class="line">    &#123; </span><br><span class="line">        return state; </span><br><span class="line">    &#125;</span><br><span class="line">    public Memento createMemento()</span><br><span class="line">    &#123; </span><br><span class="line">        return new Memento(state); </span><br><span class="line">    &#125; </span><br><span class="line">    public void restoreMemento(Memento m)</span><br><span class="line">    &#123; </span><br><span class="line">        this.setState(m.getState()); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;管理者</span><br><span class="line">class Caretaker</span><br><span class="line">&#123; </span><br><span class="line">    private Memento memento;       </span><br><span class="line">    public void setMemento(Memento m)</span><br><span class="line">    &#123; </span><br><span class="line">        memento&#x3D;m; </span><br><span class="line">    &#125;</span><br><span class="line">    public Memento getMemento()</span><br><span class="line">    &#123; </span><br><span class="line">        return memento; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中备份必须有要备份的属性，添加了相似的类，增加了管理的难度。</p>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>for循环不说了</p>
<h2 id="解释器"><a href="#解释器" class="headerlink" title="解释器"></a>解释器</h2><p>分析语言，解析成可以看的懂的语言，这个和跨语言相关，不说了。</p>
<p>参考资料：</p>
<ul>
<li><a href="http://c.biancheng.net/design_pattern/" target="_blank" rel="noopener" title="C语言中文网 设计模式">C语言中文网</a></li>
<li><a href="https://baike.baidu.com/item/%E5%A4%A7%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/85262" target="_blank" rel="noopener" title="大话设计模式 实体书">大话设计模式</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/03/23/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/" data-id="ck85xt1dh00094gvlc3576pxt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/" rel="tag">行为模式</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/03/24/UML%E7%B1%BB%E5%9B%BE/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          UML类图
        
      </div>
    </a>
  
  
    <a href="/2020/03/23/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">结构型模式</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML%E7%B1%BB%E5%9B%BE/" rel="tag">UML类图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" rel="tag">创建型模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" rel="tag">结构型模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/" rel="tag">行为模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/UML%E7%B1%BB%E5%9B%BE/" style="font-size: 10px;">UML类图</a> <a href="/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">创建型模式</a> <a href="/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">结构型模式</a> <a href="/tags/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">行为模式</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 20px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/03/24/UML%E7%B1%BB%E5%9B%BE/">UML类图</a>
          </li>
        
          <li>
            <a href="/2020/03/23/%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/">行为模式</a>
          </li>
        
          <li>
            <a href="/2020/03/23/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/">结构型模式</a>
          </li>
        
          <li>
            <a href="/2020/03/21/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/">创建型模式</a>
          </li>
        
          <li>
            <a href="/2020/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%9B%AE%E7%9A%84/">设计模式的目的</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>